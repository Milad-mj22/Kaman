{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}کمان | سامانه هوشمند مدیریت{% endblock %}</title>
  <!-- ✅ Favicon -->
  <link rel="icon" type="image/png" href="{% static 'icons/icon.png' %}">
  <link rel="shortcut icon" href="{% static 'favicon.ico' %}" />



  <style>
    :root { --header-h: 74px; }
    @media (max-width: 800px){ :root { --header-h: 64px; } }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: 'Vazirmatn', sans-serif;
      background: radial-gradient(circle at top left, #2b004f, #0a0015);
      color: #fff;
      display: grid;
      grid-template-rows: auto 1fr auto;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* -------- Header -------- */
    .smart-header {
      position: fixed; top: 0; left: 0; right: 0; width: 100%;
      z-index: 1000;
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255,255,255,0.08);
      box-shadow: 0 2px 15px rgba(0,0,0,0.3);
      height: var(--header-h);
    }
    .nav-container {
      height: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0;
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      column-gap: 24px;
      position: relative;
    }
    .nav-logo {
      display: flex; align-items: center; gap: 10px;
      justify-self: end; white-space: nowrap;
    }
    .nav-logo img { width: 42px; filter: drop-shadow(0 0 8px #ff00c8); }
    .nav-logo span {
      font-size: 28px; font-weight: 800;
      background: linear-gradient(90deg, #ff00c8, #7a00ff);
      -webkit-background-clip: text; color: transparent;
      letter-spacing: .5px;
    }
    .nav-links { justify-self: center; display: flex; align-items: center; gap: 50px; }
    .nav-links a {
      position: relative; text-decoration: none; color: #fff; font-weight: 500; transition: .3s ease;
    }
    .nav-links a::after {
      content: ""; position: absolute; bottom: -6px; right: 0; width: 0; height: 2px;
      border-radius: 2px; background: linear-gradient(90deg, #ff00c8, #7a00ff); transition: width .3s ease;
    }
    .nav-links a:hover::after, .nav-links a.active::after { width: 100%; }
    .nav-links a:hover { color: #ffbdf5; }

    .nav-toggle {
      justify-self: start;
      display: none; flex-direction: column; gap: 6px;
      cursor: pointer; background: transparent; border: 0;
      width: 44px; height: 44px; align-items: center; justify-content: center;
      padding-left: 50px;
    }
    .nav-toggle span { display:block; width:26px; height:2px; background:#fff; border-radius:2px; transition:.3s; }
    .nav-toggle.active span:nth-child(1){ transform: rotate(45deg) translateY(8px); }
    .nav-toggle.active span:nth-child(2){ opacity: 0; }
    .nav-toggle.active span:nth-child(3){ transform: rotate(-45deg) translateY(-8px); }

    .drawer { display: none !important; }
    .backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.5); z-index: 998; opacity: 0; transition: opacity .25s ease; }
    .backdrop.show { opacity: 1; }
    .backdrop[hidden] { display: none; }

    .page-offset { padding-top: var(--header-h); }

    /* -------- Default Hero (overridable) -------- */
    .hero {
      width: 100%;
      display: flex; flex-direction: column; justify-content: center; align-items: center;
      height: 320px; text-align: center; position: relative; overflow: hidden; padding: 0 20px;
      background: url("{% static 'icons/banner.png' %}") no-repeat center center;
      background-size: 100% 100%;
    }
    .hero::after { content:""; position:absolute; inset:0; background: rgba(0,0,0,.6); }
    .hero-content { position: relative; z-index: 2; max-width: 800px; margin: auto; }
    .hero h1 {
      font-size: 44px; font-weight: 800;
      background: linear-gradient(90deg, #ff00c8, #7a00ff);
      -webkit-background-clip: text; color: transparent; margin-bottom: 20px;
    }
    .hero p { font-size: 18px; color: #ddd; line-height: 1.8; margin-bottom: 35px; }

    /* -------- Footer -------- */
    footer {
      text-align:center;  font-size:14px; color:#bbb; background:#0a0015;
      position: fixed; bottom:0; left:0; right:0; width:100%; z-index: 10;
      max-height: 30px;
      min-height: 30px;
    }

    /* -------- Responsive -------- */
    @media (max-width: 800px) {
      .smart-header { width: 100%; padding-top: env(safe-area-inset-top); }
      .nav-container { max-width: 100%; padding: 0 16px; }
      .nav-links { display: none; }
      .nav-toggle { display: flex; }
      .nav-toggle { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); }
      .nav-logo   { position: absolute; right: 16px; top: 50%; transform: translateY(-50%); }
      .nav-logo span { font-size: 24px; }
      .nav-logo img  { width: 36px; }

      .drawer {
        display: flex !important;
        position: fixed; top: 0; left: -100%;
        width: 100%; height: 100vh;
        background: rgba(10,0,20,.95); backdrop-filter: blur(10px);
        flex-direction: column; align-items: center; justify-content: center; gap: 28px;
        transition: left .3s ease; z-index: 999;
        padding-bottom: env(safe-area-inset-bottom);
      }
      .drawer.show { left: 0; }
      .drawer a { color:#fff; text-decoration:none; font-size:18px; position:relative; }
      .drawer a::after{
        content:""; position:absolute; bottom:-6px; left:0; height:2px; width:0;
        background: linear-gradient(90deg,#ff00c8,#7a00ff); transition: width .3s; border-radius:2px;
      }
      .drawer a:hover::after { width:100%; }

      footer { position: relative;  }
    }

    @media (max-width: 600px){
      .hero { height:auto; padding: 10px 0; background-size: 100% 100%; }
      .hero h1 { font-size: 28px; margin-bottom: 10px; }
      .hero p  { font-size: 15px; margin-bottom: 25px; }
    }

    {% block extra_css %}{% endblock %}
  </style>
</head>
<body>

<header class="smart-header">
  <div class="nav-container">
    <!-- RIGHT: Logo -->
    <div class="nav-logo">
      <img src="{% static 'icons/kaman.png' %}" alt="Kaman Logo" />
      <span>کمان</span>
    </div>

    <!-- CENTER: Menu Links (desktop) -->
    <nav class="nav-links">
      <a href="{% url 'home' %}" class="{% block nav_home_active %}{% endblock %}">خانه</a>
      <a href="{% url 'products' %}">محصولات</a>
      <a href="{% url 'demo' %}">دمو</a>
      <a href="{% url 'videos' %}">ویدیوها</a>

      <a href="{% url 'articles' %}">مقالات</a>
      <a href="{% url 'about' %}" class="{% block nav_about_active %}{% endblock %}">درباره ما</a>
      <a href="{% url 'contact' %}">تماس با ما</a>
    </nav>

    <!-- LEFT: Hamburger (mobile) -->
    <button class="nav-toggle" id="navToggle" aria-label="باز کردن منو" aria-controls="drawer" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
  </div>

  <!-- Drawer + Backdrop -->
  <nav class="drawer" id="drawer" aria-hidden="true">
    <a href="{% url 'home' %}">خانه</a>
    <a href="{% url 'products' %}">محصولات</a>
    <a href="{% url 'demo' %}">دمو</a>
      <a href="{% url 'videos' %}">ویدیوها</a>

    <a href="{% url 'articles' %}">مقالات</a>
    <a href="{% url 'about' %}">درباره ما</a>
    <a href="{% url 'contact' %}">تماس با ما</a>
  </nav>
  <div class="backdrop" id="backdrop" hidden></div>
</header>

<main class="page-offset">
  {% block hero %}
  <!-- Default hero (صفحات می‌توانند override کنند یا کل این بلاک را حذف کنند) -->
  <section class="hero">
    <div class="hero-content">
      <h1>با یک تیر چند نشان بزن!</h1>
      <p>مجموعه ابزارهای حرفه‌ای کمان؛ سامانه هوشمند مدیریت انبار، سفارش، فروش، اتوماسیون، تحلیل مشتریان و داده‌های شما</p>
    </div>
  </section>
  {% endblock %}

  {% block content %}{% endblock %}
</main>


<footer>
    کمان - تمامی حقوق محفوظ مجموعه کمان و مشتریان است.
</footer>


<script>
  const toggle   = document.getElementById('navToggle');
  const drawer   = document.getElementById('drawer');
  const backdrop = document.getElementById('backdrop');

  function openDrawer() {
    toggle.classList.add('active');
    drawer.classList.add('show');
    backdrop.hidden = false;
    requestAnimationFrame(() => backdrop.classList.add('show'));
    document.body.style.overflow = 'hidden';
    toggle.setAttribute('aria-expanded', 'true');
    drawer.setAttribute('aria-hidden', 'false');
  }
  function closeDrawer() {
    toggle.classList.remove('active');
    drawer.classList.remove('show');
    backdrop.classList.remove('show');
    setTimeout(() => { backdrop.hidden = true; }, 250);
    document.body.style.overflow = '';
    toggle.setAttribute('aria-expanded', 'false');
    drawer.setAttribute('aria-hidden', 'true');
  }

  toggle.addEventListener('click', () => {
    drawer.classList.contains('show') ? closeDrawer() : openDrawer();
  });
  backdrop.addEventListener('click', closeDrawer);
  document.querySelectorAll('#drawer a').forEach(a => a.addEventListener('click', closeDrawer));
  window.addEventListener('resize', () => { if (window.innerWidth > 800) closeDrawer(); });
</script>

{% block extra_js %}{% endblock %}
</body>
</html>
